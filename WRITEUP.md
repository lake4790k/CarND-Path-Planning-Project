# Path Planning Writeup

The model is implemented in the following classes:

`Car` represents the cars from sensor fusion. Once created from sensor fusion data on each cycle on it will know its own lane, its position and each car is forwarded into the future where the previous paths ends. The prediction is done by calculating the cars speed assuming the car is moving forward and not changing lanes (typical but not always accurate). It can return its `s` distance to another car.

`EgoCar` extends `Car`, this is the car being controlled and is created once in the beginning persisting between cycle with its state. On every cycle it gets the predicted other cars, predicts itself and checks if the road ahead will be clear. If not it will check if the available other lanes would be clear and picks the one that will have the faster (or no) car ahead to choose a `target_lane`. The `target_speed` of the car is adjusted to match the car in front in case it is within a certain range to prevent coliding into it.

`Path` is using the spline based method suggested by Aaron. On every cycle 50 points are built. The points ahead from the previous paths are reused to ensure smooth transition between the cycles and additional points are generated by building a spline 30,60,90 `s` ahead of the cars predicted state in the `target_lane` decided by the `EgoCar`. While building the path points from the spline using Aarons triangle method the cars `target_speed` is taken into account by increasing/decreasing the speed along the path towards the target speed. Before building the spline the path points are converted into the cars coordinate system and converted back when building the new path.

To prevent excessive acceleration the forward acceleration was tuned and sideways acceleration is limited by preventing the car changing lanes too often. The safety distances were set so the car can use all the oportunities to change lanes, but still in a safe way.

This solution completes the track well, but certainly could be improved further:

* when predicting the other cars future position `s` and `d` velocities should be used, so that lane changing cars can be predicted accurately
* the sideways acceleration is limited by not allowing too frequent lane changes, but this would be necessary for safety, ie. to avoid other cars suddenly changing in front of us
* the trajectories are planned in the short term, on lane change at a time, but there are situations when better overall progress could be made by planning multiple lane changes with the goal if getting further using more complex cost functions
